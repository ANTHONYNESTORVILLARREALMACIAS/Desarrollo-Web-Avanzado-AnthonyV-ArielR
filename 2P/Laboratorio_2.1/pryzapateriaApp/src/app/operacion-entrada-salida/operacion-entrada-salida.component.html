<div class="operacion-container">
  <h2>Operación de Entrada y Salida de Productos</h2>

  <form [formGroup]="operacionForm" (ngSubmit)="realizarOperacion()">
    <div>
      <label for="operacion">Operación</label>
      <select id="operacion" formControlName="operacion">
        <option value="" disabled>Seleccione una operación</option>
        <option value="entrada">Entrada</option>
        <option value="salida">Salida</option>
      </select>
      <div *ngIf="operacionForm.get('operacion')?.invalid && operacionForm.get('operacion')?.touched">
        <small class="error-message">La operación es obligatoria.</small>
      </div>
    </div>

    <div>
      <label for="cantidad">Cantidad</label>
      <input
        id="cantidad"
        type="number"
        formControlName="cantidad"
        min="1"
        [max]="productoSeleccionado?.stockActual ?? 0"
      />
      <div *ngIf="operacionForm.get('cantidad')?.invalid && operacionForm.get('cantidad')?.touched">
        <small class="error-message">La cantidad es obligatoria y debe ser mayor que 0.</small>
      </div>
      <div *ngIf="operacionForm.get('cantidad')?.hasError('max')">
        <small class="error-message">La cantidad no puede exceder el stock disponible.</small>
      </div>
    </div>

    <button type="submit" [disabled]="operacionForm.invalid">Realizar Operación</button>
  </form>

  <div *ngIf="mensaje" class="mensaje">
    <p>{{ mensaje }}</p>
  </div>
</div>
